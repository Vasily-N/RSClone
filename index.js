(()=>{"use strict";var t={6717:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"8c3ff9fadef65c7c29a1d3776961e66a.mp3"},5225:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"9ab32d21414562a962d714f5c89e50c0.png"},1978:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"f027066d86690d8d78f29c012ef10c5d.png"},2420:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"d2a1024a482919d4e3cce132a20465ba.png"},4700:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"cbb854cbac2fe31465638ae5ca75d78d.png"},1038:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"146dd590ebf12a14ed6477cba2bb37a8.png"},1697:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"d388d3c3aa833699d132fce7931f0bad.png"},5674:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"f8b794eee158d45103b5ff4d7ec49d38.png"},333:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"340fb47fe5db94b7be1c182b5a72225c.png"},9712:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"7d5024e27dde5fc8eef92fbb500f3670.mp3"},4640:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"902c8b5dde084f3476add9da826e54fd.png"},5215:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"d746ed695504ff8244ae43a46d88c5b8.mp3"},5669:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"01e9078b8e3b645ce6760e6d639d7368.mp3"},5591:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<nav class="{{navigation}}"> <button id="toCanvas" class="{{button}} {{button_1}}">TO CANVAS</button> <button id="toPlaceholder" class="{{button}} {{button_1}}">TO BOARDERS</button> <button id="toSettingGame" class="{{button}} {{button_1}}">Setting Game</button> </nav> <div id="sounds" class="{{sounds}}"></div> <main class="{{content}}"></main> '},5799:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<div class="tables"> <div class="times"> <p>The Best Times</p> <table class="time-table" id="timeTable"> <thead> <tr> <th>Name</th> <th>Time</th> <th>Date</th> </tr> </thead> <tbody> <tr> <td>Example name</td> <td>0</td> <td id="timeBorderDate"></td> </tr> </tbody> </table> </div> <div class="wins"> <p>Amount of wins</p> <table class="win-table" id="winTable"> <thead> <tr> <th>Name</th> <th>Win</th> <th>Date of last win</th> </tr> </thead> <tbody> <tr> <td>Example name</td> <td>0</td> <td id="winBorderDate"></td> </tr> </tbody> </table> </div> </div> '},4340:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<div class="canvas"> <div id="hp" class="{{hp}}">&nbsp;</div> <canvas id="canvas" class="{{canvas}}"></canvas> </div> '},119:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<div class="setting__game"> <p>Draw Boxes</p> <div> <input type="checkbox" class="{{check-box}}" id="boxes__drow" value="true"> </div> <p>Draw Surfaces</p> <div> <input type="checkbox" class="{{check-box}}" id="draw__surfaces" value="true"> </div> <p>Fps Display</p> <div> <input type="checkbox" class="{{check-box}}" id="fps__display" value="true"> </div> <p>Choose Fps Limit</p> <input type="number" id="fps__Limit" min="0" max="80"/> <p>size zoom of game</p> <select id="zoom__game"> <option selected="selected" disabled="disabled" hidden>Choose here</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> </select> </div>'},4112:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<audio id="music" autoplay="true"></audio> <div id="sounds"></div>'},3535:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={button:"app__button",button_1:"app__button_1",button_2:"app__button_2",button_disabled:"app__button_disabled",content:"app__content",navigation:"app__navigation"}},4392:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={tables:"boarders__tables"}},90:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={bg:"canvas__bg",canvas:"canvas__canvas"}},3804:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={}},6125:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={}},1495:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(1999),o=i(68),r=i(786),a=s(i(9457));class l{constructor(){this.contolsSettings=new n.ControlsSettings,new n.Api("http://localhost:3000/");const t=new n.SoundPlay,e={controls:{settings:new n.ControlsSettings,action:n.ControlsAction},gameSettings:new n.GameSettings,sounds:{subsribe:t,settings:t,play:t},api:{placeholder1:null,times:new o.TimeServices(new n.Api("http://127.0.0.1:5000/api/"),"times",{}),users:new r.UserServices(new n.Api("http://127.0.0.1:5000/api/"),"users",{})}};this.page=new a.default("body",e)}start(){this.page.append(),l.taskConsole()}static taskConsole(){}}e.default=l},4192:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(3427);e.default=class{constructor(t,e=!1){this.rect=new s.Rectangle(e?t.X:t.X-t.Width/2,e?t.Y:-t.Y,t.Width,t.Height),this.rectReverse=new s.Rectangle(-this.rect.Right,this.rect.Top,t.Width,t.Height)}getRect(t){return t?this.rectReverse:this.rect}static initCombined(t,e){const i=Math.min(t.X,e.X),n=Math.max(t.X+t.Width,e.X+e.Width),o=Math.min(t.Y,e.Y),r=Math.max(t.Bottom,e.Bottom);return s.Rectangle.fromLine(new s.Line(new s.Point(i,o),new s.Point(n,r)))}hit(t){throw new Error("Box.hit is not implemented!")}draw(t,e,i,s){const n=this.getRect(s),o=Math.round(e.X+n.X*i),r=Math.round(e.Y+n.Y*i);t.strokeRect(o,r,n.Width*i,n.Height*i)}}},4241:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(309),o=i(5861),r=i(3427),a=i(7238),l=s(i(9770)),u=s(i(7969)),c=s(i(6514));class h extends o.Entity{constructor(t){super(r.Point.Zero,a.states),this.airJumps=1,this.jumpHold=!1,this.didAFlip=!1,this.conrols=t}get VelocityX(){return this.velocityPerSecond.X}get VelocityY(){return this.velocityPerSecond.Y}static getMaxVelX(t){return t?h.maxVelX.run:h.maxVelX.walk}getXVelChangePerSec(){return this.OnSurface?h.changeVelX[this.surfaceType]||h.changeVelX.default:h.changeVelX.air}processWalk(t){const e=Math.max(Math.abs(this.velocityPerSecond.X),h.getMaxVelX(this.conrols.has(n.ControlsAction.run)));this.velocityPerSecond.X=this.direction?Math.max(this.velocityPerSecond.X-t,-e):Math.min(this.velocityPerSecond.X+t,e)}processSlowDown(t){this.OnSurface&&(this.velocityPerSecond.X=this.velocityPerSecond.X<0?Math.min(this.velocityPerSecond.X+t,0):Math.max(this.velocityPerSecond.X-t,0))}processJump(){if(this.OnSurface&&(this.airJumps=h.maxAirJumps),this.conrols.has(n.ControlsAction.jump)){if(!this.jumpHold){if(this.OnSurface)this.surfaceType=null;else{if(!this.airJumps)return;this.airJumps-=1}this.State=a.CharacterState.Walk,c.default.sound(u.default.jump),this.velocityPerSecond.Y=-h.jumpPower,this.jumpHold=!0}}else this.jumpHold=!1}processActions(t,e){for(let i=t.length-1;i>-1;i-=1)if(this.conrols.has(t[i]))return this.stateElapsedSeconds=0,this.State=e[i],!0;return!1}processAttack(){return this.processActions(h.attackKeys,h.attackValues)}processFlip(){return this.OnSurface?(this.didAFlip=!1,!1):!this.didAFlip&&(this.didAFlip=this.processActions(h.flipKeys,h.flipValues),!!this.didAFlip&&(this.velocityPerSecond.X=60*(this.stateCurrent===a.CharacterState.FlipBack?-1:1),this.velocityPerSecond.Y=-130,this.direction&&(this.State=h.flipReverse[this.stateCurrent]),!0))}longAnimationCheck(t){return h.longStates.includes(this.stateCurrent)&&!!this.animation&&!o.Entity.animationFinished(this.animation,this.stateElapsedSeconds+t)}processControls(t){const e=this.longAnimationCheck(t)||this.processAttack()||this.processFlip(),i=this.conrols.has(n.ControlsAction.moveLeft),s=this.conrols.has(n.ControlsAction.moveRight),r=this.conrols.has(n.ControlsAction.sit),l=t*this.getXVelChangePerSec();e||(s&&(this.direction=o.Direction.right),i&&(this.direction=o.Direction.left));const u=i||s;(r||e||!u)&&this.processSlowDown(l),e||(u&&!r?(this.processWalk(l),this.State=a.CharacterState.Walk):this.OnSurface?this.State=r?a.CharacterState.Sit:a.CharacterState.Idle:this.State=a.CharacterState.Walk,this.processJump())}frame(t){this.processControls(t),super.frame(t)}levelLoad(t){this.position.X=t.X,this.position.Y=t.Y}}h.maxVelX={walk:100,run:180},h.changeVelX={default:1500,air:180,[l.default.Ice]:100},h.maxAirJumps=1,h.jumpPower=160,h.attackStates={[n.ControlsAction.attackLight]:a.CharacterState.AttackNormal,[n.ControlsAction.attackHeavy]:a.CharacterState.AttackHeavy,[n.ControlsAction.attackRange]:a.CharacterState.AttackRange},h.attackKeys=Object.keys(h.attackStates),h.attackValues=Object.values(h.attackStates),h.flipStates={[n.ControlsAction.flipRight]:a.CharacterState.FlipForward,[n.ControlsAction.flipLeft]:a.CharacterState.FlipBack},h.flipReverse={[a.CharacterState.FlipBack]:a.CharacterState.FlipForward,[a.CharacterState.FlipForward]:a.CharacterState.FlipBack},h.flipKeys=Object.keys(h.flipStates),h.flipValues=Object.values(h.flipStates),h.longStates=[...h.attackValues,...h.flipValues],e.default=h},7969:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n={jump:s(i(6717)).default};e.default=n},8074:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(5225)),o=i(3427),r={link:n.default,frameLength:1/12,frameSize:75,vertical:!0,hasReverse:!0,position:new o.Point(10,1)};e.default=r},5360:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(1978)),o=i(3427),r={link:n.default,frameLength:1/15,frameSize:42,vertical:!0,hasReverse:!0,position:new o.Point(4,0)};e.default=r},7715:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(2420)),o=i(3427),r={link:n.default,frameLength:1/15,frameSize:44,vertical:!0,hasReverse:!0,position:new o.Point(12,0)};e.default=r},3643:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(4700)),o=s(i(6588));e.default=Object.assign(Object.assign({},o.default),{link:n.default})},1960:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(1038)),o=s(i(6588));e.default=Object.assign(Object.assign({},o.default),{link:n.default})},6588:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={link:"",frameLength:.05,frameSize:37,vertical:!0,hasReverse:!0}},9773:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n={link:s(i(1697)).default,frameLength:1/15,frameSize:44,vertical:!0,hasReverse:!0};e.default=n},2355:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n={link:s(i(5674)).default,frameLength:1/15,frameSize:23,vertical:!0,hasReverse:!0};e.default=n},1083:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(333)),o=i(3427),r={link:n.default,frameLength:1/15,frameSize:43,vertical:!0,hasReverse:!0,position:new o.Point(-4,0)};e.default=r},7238:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.states=e.CharacterState=void 0;const n=i(3427),o=s(i(4192)),r=s(i(1083)),a=s(i(9773)),l=s(i(2355)),u=s(i(5360)),c=s(i(8074)),h=s(i(7715)),d=s(i(3643)),f=s(i(1960));var p;!function(t){t[t.Idle=0]="Idle",t[t.Walk=1]="Walk",t[t.Run=2]="Run",t[t.Jump=3]="Jump",t[t.Sit=4]="Sit",t[t.AttackNormal=5]="AttackNormal",t[t.AttackHeavy=6]="AttackHeavy",t[t.AttackRange=7]="AttackRange",t[t.FlipBack=8]="FlipBack",t[t.FlipForward=9]="FlipForward"}(p||(p={})),e.CharacterState=p;const m=new o.default(new n.Rectangle(0,42,14,40)),g=new o.default(new n.Rectangle(2,40,10,36)),v=new o.default(new n.Rectangle(2,6,14,6)),w=new o.default(new n.Rectangle(18,36,26,4)),b=new o.default(new n.Rectangle(2,42,14,42)),S=new o.default(new n.Rectangle(-4,22,18,22)),y=[new o.default(new n.Rectangle(-20,60,30,36)),new o.default(new n.Rectangle(5,76,60,40)),new o.default(new n.Rectangle(36,64,40,60))],P=new o.default(new n.Rectangle(114,40,180,4)),_={[p.Idle]:{sprite:a.default,collisionbox:b,hurtbox:m},[p.Walk]:{sprite:r.default,collisionbox:b,hurtbox:g,hitbox:v},[p.Sit]:{sprite:l.default,collisionbox:b,hurtbox:S},[p.AttackNormal]:{sprite:u.default,collisionbox:b,hurtbox:m,hitbox:w},[p.AttackHeavy]:{sprite:c.default,collisionbox:b,hurtbox:m,hitboxes:y},[p.AttackRange]:{sprite:h.default,collisionbox:b,hurtbox:m,hitbox:P},[p.FlipBack]:{sprite:d.default,collisionbox:b,hurtbox:m},[p.FlipForward]:{sprite:f.default,collisionbox:b,hurtbox:m}};e.states=_},1431:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(5861),n=i(7891);class o extends s.Entity{constructor(t){super(t,n.states)}}e.default=o},7891:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.states=e.PlaceholderState=void 0,function(t){t[t.Idle=0]="Idle"}(i||(i={})),e.PlaceholderState=i;const s={[i.Idle]:{}};e.states=s},5861:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EntityId=e.Direction=e.Entity=void 0;const n=i(7661);Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return n.Direction}}),Object.defineProperty(e,"EntityId",{enumerable:!0,get:function(){return n.EntityId}});const o=i(9325),r=i(3427),a=s(i(4192));class l{constructor(t,e,i){this.direction=n.Direction.right,this.position=r.Point.Zero,this.velocityPerSecond=r.Point.Zero,this.gravity=230,this.states={},this.stateElapsedSeconds=0,this.stateCurrent=-1,this.animation=null,this.collisionBox=null,this.surfaceType=null,this.position=t,e&&(this.states=l.initStates(e),this.State=i||Number(Object.keys(e)[0]))}get Direction(){return this.direction}get Position(){return this.position}get Collision(){var t;return(null===(t=this.collisionBox)||void 0===t?void 0:t.getRect(!!this.direction))||r.Rectangle.Zero}set SurfaceType(t){this.surfaceType=t}get OnSurface(){return null!==this.surfaceType}static getCollisionSimplified(t){return t.map((t=>t.getRect())).reduce(((t,e)=>a.default.initCombined(t,e)),new r.Rectangle(0,0,0,0))}set State(t){if(!this.states[t])return this.stateCurrent=-1,this.animation=null,void(this.collisionBox=null);t!==this.stateCurrent&&(this.stateElapsedSeconds=0,this.stateCurrent=t,[this.collisionBox]=this.states[this.stateCurrent].collisionboxes,this.animation=this.states[this.stateCurrent].animation||null)}static concatBoxes(t,e){return(e||[]).concat(t||[])}static initStates(t){return Object.keys(t).reduce(((e,i)=>{const s=t[+i],n=l.concatBoxes(s.hitbox,s.hitboxes),r=l.concatBoxes(s.hurtbox,s.hurtboxes),u=r.length?r:n,c=l.concatBoxes(s.collisionbox,s.collisionboxes),h={hitboxes:n,hurtboxes:u,collisionboxes:[new a.default(l.getCollisionSimplified(c.length?c:r),!0)]};return s.sprite&&Object.assign(h,{animation:new o.SpriteAnimation(s.sprite)}),Object.assign(e,{[+i]:h}),e}),{})}frame(t){this.stateElapsedSeconds+=t,!this.OnSurface&&this.velocityPerSecond.Y<l.maxVelY&&(this.velocityPerSecond.Y+=t*this.gravity,this.velocityPerSecond.Y=Math.min(this.velocityPerSecond.Y,l.maxVelY)),this.position.Y+=t*this.velocityPerSecond.Y,this.position.X+=t*this.velocityPerSecond.X}resetVelocityX(){this.velocityPerSecond.X=0}resetVelocityY(t=!1,e=!1){(!t&&!e||t&&this.velocityPerSecond.Y<0||e&&this.velocityPerSecond.Y>0)&&(this.velocityPerSecond.Y=this.gravity/24)}static drawPosition(t,e){const i=t;i.strokeStyle=l.colors.position,i.fillRect(Math.round(e.X),Math.round(e.Y),1,1)}drawBoxes(t,e,i){if(this.stateCurrent<0)return;const s=this.states[this.stateCurrent],n=!!this.direction,o=t;t.translate(.5,.5),o.strokeStyle=l.colors.collision,s.collisionboxes.forEach((s=>s.draw(t,i,e,n))),o.strokeStyle=l.colors.hurt,s.hurtboxes.forEach((s=>s.draw(t,i,e,n))),o.strokeStyle=l.colors.hit,s.hitboxes.forEach((s=>s.draw(t,i,e,n))),l.drawPosition(t,i),t.translate(-.5,-.5)}draw(t,e,i,s=!1){const n=this.position.multiply(i).minus(e);if(this.animation){const e=this.stateElapsedSeconds;this.animation.drawFrame(t,n,i,e,!!this.direction)}s&&this.drawBoxes(t,i,n)}static animationFinished(t,e){return t.Ends<=e}}e.Entity=l,l.maxVelY=400,l.colors={hit:"red",hurt:"blue",collision:"fuchsia",position:"green"}},1255:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(5861),o=s(i(1431)),r={[n.EntityId.Placeholder]:o.default};e.default=r},1929:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.right=0]="right",t[t.left=1]="left"}(i||(i={})),e.default=i},9904:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Placeholder=0]="Placeholder"}(i||(i={})),e.default=i},7661:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EntityId=e.Direction=void 0;const n=s(i(1929));e.Direction=n.default;const o=s(i(9904));e.EntityId=o.default},4989:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const n=s(i(4241)),o=i(309),r=i(2714),a=i(9225),l=s(i(6514));class u{constructor(t,e,i){this.lastFrame=0,this.levels={},this.levelCurrent=this.getLevel(a.LevelId.winTheGame),this.pause=!1,this.totalElapsed=0,l.default.setSoundPlay(i),this.controls=new o.Controls(t),this.char=new n.default(this.controls),this.gameSettings=e}start(t){this.levelCurrent=this.changeLevel({levelId:a.LevelId.beggining,zone:0,position:0}),this.requestNextFrame(),this.totalElapsed=0,this.report=t}getLevel(t){return this.levels[t]||(this.levels[t]=new r.Level(a.levelList[t])),this.levels[t]}changeLevel(t){const e=this.levelIdCurrent===t.levelId,i=e?this.levelCurrent:this.getLevel(t.levelId);return e||(this.levelIdCurrent=t.levelId),i.load(this.char,t.zone,t.position,e),i}requestNextFrame(){window.requestAnimationFrame(this.frame.bind(this))}static drawFps(t,e,i){const s=t;s.font=`${e}px serif`,s.fillStyle="white",s.fillText(`FPS: ${(1e3/i).toFixed(1)}`,5,e)}static timePad(t,e=2){return`${t}`.padStart(e,"0")}static timeSpanToString(t){return`${u.timePad(t.getUTCHours())}:${u.timePad(t.getMinutes())}:${u.timePad(t.getUTCSeconds())}.${u.timePad(t.getUTCMilliseconds(),3)}`}static drawTime(t,e,i){const s=t;s.font=`${e}px serif`,s.fillStyle="white",s.fillText(u.timeSpanToString(new Date(1e3*i)),5,2*e)}processFrame(t){const e=this.gameSettings.getRenderZone();if(!e)throw u.RenderError;if(!this.levelCurrent)return!1;e.lineWidth=3,e.imageSmoothingEnabled=!1;const{RenderSize:i,Zoom:s}=this.gameSettings;e.clearRect(0,0,i.X,i.Y);const n=Math.min(t/1e3,this.gameSettings.FrameTimeLimitMin);this.totalElapsed+=n;const o=this.levelCurrent.frame(n,i,s);return(null==o?void 0:o.levelId)===a.LevelId.winTheGame||(this.levelCurrent.draw(e,s,this.gameSettings.DrawBoxes,this.gameSettings.DrawSurfaces),this.gameSettings.FpsDisplay&&u.drawFps(e,u.fontSize,t),this.gameSettings.TimeDisplay&&u.drawTime(e,u.fontSize,this.totalElapsed),o&&(this.levelCurrent=this.changeLevel(o)),!1)}frame(t){this.controls.has(o.ControlsAction.pause,!0)&&this.pauseToggle();const e=t-this.lastFrame;if(this.controls.has(o.ControlsAction.zoomUp,!0)&&(this.gameSettings.Zoom+=1),this.controls.has(o.ControlsAction.zoomDown,!0)&&(this.gameSettings.Zoom-=1),!Number.isFinite(this.gameSettings.FrameTimeLimit)||e>=this.gameSettings.FrameTimeLimit){if(this.lastFrame&&!this.pause&&this.processFrame(e)){const t=this.totalElapsed;return void(this.report&&this.report.winTheGame&&this.report.winTheGame({elapsedSeconds:t}))}this.lastFrame=t}this.requestNextFrame()}pauseToggle(){this.pause=!this.pause,this.report&&this.report.pauseTheGame&&this.report.pauseTheGame()}}e.Game=u,u.RenderError=new Error("the game can't process without canvas"),u.fontSize=24},7017:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.positionsFromPoints=void 0;const n=s(i(7737));e.positionsFromPoints=n.default},7737:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(3427);e.default=function(t,e,i){return t.reduce(((t,e)=>{var i;return t.concat(new s.Line((null===(i=t.at(-1))||void 0===i?void 0:i.B)||s.Point.Zero,e))}),[]).slice(1).map((t=>Object.assign(Object.assign({position:t},i&&{type:i}),e&&{platform:e})))}},5135:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(3427);class n{constructor(t){this.target=s.Point.Zero,this.current=s.Point.Zero,this.lastZoom=-1,this.lastViewSize=s.Point.Zero,this.area=t}get Current(){return this.current}resetPosition(){this.lastZoom=-1}process(t,e,i,s){const o=this.area.multiply(i);if(e.X>o.Size.X)this.target.X=(o.Size.X-e.X)/2,this.current.X=this.target.X;else{const r=.5+(t.Direction?n.cameraShift.X:-n.cameraShift.X),a=i*t.Position.X-e.X*r,l=o.Size.X-e.X;if(this.target.X=Math.min(Math.max(a,o.X),l),this.current.X!==this.target.X){const e=this.current.X+s*t.VelocityX*i;this.current.X=Math.min(Math.max(e,o.X),l)}}if(e.Y>o.Size.Y)this.current.Y=(o.Size.Y-e.Y)/2;else{const s=n.cameraShift.Y,r=i*t.Position.Y-e.Y*s,a=o.Size.Y-e.Y;this.current.Y=Math.min(Math.max(r,o.Y),a)}if(this.lastZoom!==i||this.lastViewSize!==e)this.current.X=this.target.X,this.lastZoom=i,this.lastViewSize=e;else if(this.current.X!==this.target.X){const t=s*n.cameraSpeed*Math.sqrt(i);this.current.X=this.current.X>this.target.X?Math.max(this.current.X-t,this.target.X):Math.min(this.current.X+t,this.target.X)}}}n.cameraSpeed=90,n.cameraShift=new s.Point(1/15,6/11),e.default=n},6603:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(3427);class n{static filterNear(t,e){return t.filter((t=>t.position.MinX<=e.Right&&t.position.MaxX>=e.Left&&t.position.MinY<=e.Bottom&&t.position.MaxY>=e.Top))}static linesIntersect(t,e){const i=t.B.minus(t.A),s=e.B.minus(e.A),n=(s.X*(t.A.Y-e.A.Y)-s.Y*(t.A.X-e.A.X))/(i.X*s.Y-i.Y*s.X);if(n<0||n>1||Number.isNaN(n))return null;const o=(i.X*(t.A.Y-e.A.Y)-i.Y*(t.A.X-e.A.X))/(i.X*s.Y-s.X*i.Y);return o<0||o>1||Number.isNaN(o)?null:n}static percentOnLine(t,e,i){return Math.abs(t-e)/i}static getCheckZone(t){const e=Math.floor(t.MinY),i=Math.ceil(t.MaxY-e),n=Math.floor(t.MinX),o=Math.ceil(t.MaxX-n);return new s.Rectangle(n,e,o,i)}static processExitZones(t,e){const i=n.filterNear(t,n.getCheckZone(e));if(!i.length)return null;for(let t=i.length-1;t>-1;t-=1){const o=i[t],r=o.position;let a=n.linesIntersect(r,e);if(null===a){const t=new s.Line(e.A,new s.Point(e.B.X,e.A.Y));if(a=n.linesIntersect(r,t),null===a)continue}if(e.A.X!==o.position.MinX||e.A.X!==o.position.MaxX)return{levelId:o.levelId,zone:o.zone,position:a}}return null}static processFloorsDot(t,e,i,o){if(!e.length)return null;e.length>1&&e.sort(((t,e)=>e.position.MaxY-t.position.MaxY));for(let r=e.length-1;r>-1;r-=1){const a=e[r].position,l=n.percentOnLine(i.A.X,a.A.X,a.DifXabs);if(a.DifYabs*l+a.MinY<i.A.Y-(o?t.Collision.Height:0))continue;const u=n.percentOnLine(i.B.X,a.A.X,a.DifXabs),c=a.DifYabs*u+a.MinY;if(o||!(c>i.B.Y))return{surface:e[r],point:new s.Point(i.B.X,c-.16)}}return null}static processFloorSub(t,e,i,s,o){const r=n.filterNear(e,i);return n.processFloorsDot(t,r,s,o)}static processFloor(t,e,i){const o=Math.floor(i.MinY-t.Collision.Height/4),r=Math.ceil(i.MaxY-o+t.Collision.Height/4),a=new s.Rectangle(i.B.X,o,0,r);return n.processFloorSub(t,e,a,i,t.OnSurface)||null}static processCeilDot(t,e){if(!t.length)return null;t.length>1&&t.sort(((t,e)=>-(e.position.MaxY-t.position.MaxY)));for(let i=t.length-1;i>-1;i-=1){const o=t[i].position,r=n.percentOnLine(e.A.X,o.A.X,o.DifXabs);if(o.DifYabs*r+o.MinY>e.A.Y)continue;const a=n.percentOnLine(e.B.X,o.A.X,o.DifXabs),l=o.DifYabs*a+o.MinY;if(!(l<e.B.Y))return{surface:t[i],point:new s.Point(e.B.X,l)}}return null}static processCeil(t,e,i){const o=e.Collision.plusPoint(e.Position),r=new s.Line(new s.Point(i.A.X,i.A.Y-o.Height),new s.Point(i.B.X,i.B.Y-o.Height)),a=Math.floor(r.MinY),l=o.Left+n.ceilThr,u=Math.ceil(r.MaxY-a),c=o.Width-2*n.ceilThr,h=new s.Rectangle(l,a,c,u),d=n.filterNear(t,h);return n.processCeilDot(d,r)}static RayVsRect(t,e){const i=t.A,n=t.Direction,o=new s.Point(1/n.X,1/n.Y),r=e.Position.minus(i).multiplyPoint(o),a=e.BottomRight.minus(i).multiplyPoint(o);if(Number.isNaN(a.Y)||Number.isNaN(a.X))return null;if(Number.isNaN(r.Y)||Number.isNaN(r.X))return null;if(r.X>a.X&&([r.X,a.X]=[a.X,r.X]),r.Y>a.Y&&([r.Y,a.Y]=[a.Y,r.Y]),r.X>a.Y||r.Y>a.X)return null;const l=Math.max(r.X,r.Y),u=Math.min(a.X,a.Y);if(u<0)return null;const c=i.plus(n.multiply(l)),h=i.plus(n.multiply(u));return new s.Line(c,h)}static processWalls(t,e,i){const o=e.Collision,r=o.plusPoint(e.Position),a=r.minusPoint(i.Direction),l=s.Rectangle.fromLine(new s.Line(new s.Point(Math.min(r.Left,a.Left),Math.min(r.Top,a.Top)),new s.Point(Math.max(r.Right,a.Right),Math.max(r.Bottom,a.Bottom)))),u=n.filterNear(t,l);for(let t=u.length-1;t>-1;t-=1){const e=u[t].position,n=this.RayVsRect(e,r);if(n){if(a.Bottom<=e.MinY)return{surface:u[t],point:new s.Point(i.B.X,e.MinY)};if(a.Top>=e.MaxY)return{point:new s.Point(i.B.X,e.MaxY+o.Height+1)};if((null==n?void 0:n.A.X)===(null==n?void 0:n.B.X))return{point:new s.Point(a.X<r.X?e.MinX-o.Right:e.MaxX-o.Left,i.B.Y)};throw new Error("why do you have not straigh walls?!")}}return null}static processCeil2(t,e,i){const o=e.Collision,r=o.plusPoint(e.Position),a=r.minusPoint(i.Direction),l=n.filterNear(t,r);for(let t=l.length-1;t>-1;t-=1){const e=l[t].position,u=n.RayVsRect(e,r);if(!u)continue;if(Math.abs(e.MinX-u.A.X)<Math.abs(u.B.X-e.MaxX)){if(e.MinX<r.Left)continue;const n=e.MinX===e.B.X?e.B.Y:e.A.Y,u=e.MinY!==e.MaxY&&n===e.MinY?.48:0;if(a.Bottom<=n+u){if(r.Bottom<n-u)continue;return{surface:l[t],point:new s.Point(i.B.X,n-o.Bottom-u)}}if(e.MinX+4<a.Right)continue;return{point:new s.Point(e.MinX-o.Right,i.B.Y)}}if(e.MaxX>r.Right)continue;const c=e.MaxX===e.A.X?e.A.Y:e.B.Y,h=e.MinY!==e.MaxY&&c===e.MinY?.48:0;if(a.Bottom<=c+h){if(r.Bottom<c-h)continue;return{surface:l[t],point:new s.Point(i.B.X,c-o.Bottom-h)}}if(!(e.MaxX-4>a.Left))return{point:new s.Point(e.MaxX-o.Left,i.B.Y)}}return null}}n.ceilThr=1.5,e.default=n},9074:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Collision=e.Camera=void 0;const n=s(i(5135));e.Camera=n.default;const o=s(i(6603));e.Collision=o.default},2714:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Level=void 0;const n=i(3427),o=s(i(1255)),r=s(i(9770)),a=i(9074),l=s(i(6514)),u=i(9325);var c;!function(t){t[t.All=0]="All",t[t.Walls=1]="Walls",t[t.Floors=2]="Floors",t[t.Ceils=3]="Ceils",t[t.Platforms=4]="Platforms"}(c||(c={}));class h{constructor(t){this.entities=[],this.elapsedSeconds=0,this.inAirTime=0,this.surfaceFilterCache=new Map;const[e,i]=h.splitConfig(t.walls);this.surfaces=h.initSurfaces(e,i),this.camera=new a.Camera(h.initArea(this.surfaces[c.All],t.minSize)),this.entitiesConfig=t.entities,this.loadEnter=i,this.loadExit=i.filter((t=>void 0!==t.zone)),t.music&&(this.music=t.music,t.musicLoop&&(this.musicLoop=t.musicLoop)),t.backgrounds&&(this.bgs=t.backgrounds.map((t=>new u.SpriteAnimation(t))))}static newEntity(t,e){return new t(e)}static initEntities(t){return t.map((t=>h.newEntity(o.default[t.type],t.position)))}static getAngle(t){const e=t.A.minus(t.B);return Math.atan2(e.Y,e.X)}static getPerpOfLine(t){const e=h.perpLen/Math.hypot(t.Direction.X,t.Direction.Y),i=new n.Point(t.Direction.Y,t.Direction.X).multiply(e).minus(new n.Point(e/2,e/2));return[new n.Line(t.A.minus(i),t.A.plus(i)),new n.Line(t.B.minus(i),t.B.plus(i))]}static initSurfaces(t,e){e.reduce(((t,e)=>t.concat(h.getPerpOfLine(e.position))),[]).map((t=>({position:t})));const i=t.map((t=>Object.assign(Object.assign({platform:!1,type:r.default.Normal},t),{angle:h.getAngle(t.position)}))),s=Math.PI/2,o=i.map((t=>t.angle>0?Object.assign(Object.assign({},t),{position:new n.Line(t.position.B,t.position.A),angle:Math.abs(t.angle-s)}):Object.assign(Object.assign({},t),{angle:Math.abs(t.angle+s)}))),a=o.filter((t=>t.angle<=h.wallAngle)),l=o.filter((t=>t.angle>h.wallAngle)),u=l.filter((t=>!t.platform)),d=l.filter((t=>t.platform));return{[c.All]:o,[c.Walls]:a,[c.Floors]:l,[c.Ceils]:u,[c.Platforms]:d}}static initArea(t,e){const i=t.reduce(((t,e)=>Math.min(t,e.position.MinX)),Number.MAX_SAFE_INTEGER),s=t.reduce(((t,e)=>Math.max(t,e.position.MaxX)),0),o=Math.max(s-i+1,(null==e?void 0:e.X)||0),r=t.reduce(((t,e)=>Math.min(t,e.position.MinY)),Number.MAX_SAFE_INTEGER),a=t.reduce(((t,e)=>Math.max(t,e.position.MaxY)),0),l=Math.max(a-r+1,(null==e?void 0:e.Y)||0);return new n.Rectangle(i-1,r-1,o+1,l+1)}static splitConfig(t){return t.reduce(((t,e)=>{let i;return i=void 0!==e.levelId?[t[0],[...t[1],e]]:i=[[...t[0],e],t[1]],i}),[[],[]])}load(t,e=0,i=0,s=!1){s||(this.entities=h.initEntities(this.entitiesConfig)),this.char=t;const o=this.loadEnter[e<this.loadEnter.length?e:Math.floor(Math.random()*this.loadEnter.length)].position;this.camera.resetPosition();const r=o.MinX===o.MaxX?new n.Point(o.MinX,o.MaxY):o.B.minus(o.A).multiply(i).plus(o.A);this.char.levelLoad(r.minus(new n.Point(0,.1))),this.char.frame(1e-4),this.music&&l.default.music(this.music,this.musicLoop),this.elapsedSeconds=0}processCollisions(t,e,i=!1){const s=new n.Point(t.Position.X,t.Position.Y);t.frame(e);const o=new n.Line(s,t.Position);if(i){const t=a.Collision.processExitZones(this.loadExit,o);if(t)return t}const r=a.Collision.processCeil(this.surfaces[c.Ceils],t,o);r&&(t.Position.Y=r.point.Y+t.Collision.Height,t.resetVelocityY(!0));const l=a.Collision.processFloor(t,this.surfaces[c.Floors],o);l?(this.inAirTime=0,t.Position.Y=l.point.Y,l.surface&&(t.SurfaceType=l.surface.type)):this.inAirTime+=e;const u=a.Collision.processWalls(this.surfaces[c.Walls],t,o)||!l&&!r&&a.Collision.processCeil2(this.surfaces[c.Ceils],t,o);return u?(u.surface?t.SurfaceType=u.surface.type:l||(t.SurfaceType=null),t.Position.Y!==u.point.Y&&(t.Position.Y=u.point.Y,t.resetVelocityY()),(0===this.inAirTime||this.inAirTime>.03)&&t.Position.X!==u.point.X&&(t.Position.X=u.point.X,t.resetVelocityX())):l||(t.SurfaceType=null),null}frame(t,e,i){var s;const n=this.char,o=this.processCollisions(n,t,!0);if(o)return o;null===(s=this.entities)||void 0===s||s.forEach((e=>this.processCollisions(e,t))),this.camera.process(n,e,i,t),this.elapsedSeconds+=t}static drawLine(t,e,i,s){const n=s.A.multiply(e).minus(i),o=s.B.multiply(e).minus(i);t.moveTo(Math.round(n.X),Math.round(n.Y)),t.lineTo(Math.round(o.X),Math.round(o.Y))}static drawLines(t,e,i,s,n){if(!s.length)return;const o=t;t.beginPath(),o.strokeStyle=n,s.forEach((s=>h.drawLine(t,e,i,s.position))),t.stroke(),t.closePath()}surfaceFilter(t,e){const i=JSON.stringify([t,e]);return(this.surfaceFilterCache.has(i)?this.surfaceFilterCache:this.surfaceFilterCache.set(i,this.surfaces[t].filter((t=>t.type===e)))).get(i)}drawSurfaces(t,e,i){h.surfaceTypesKeys.forEach((s=>{const n=h.colors[s];t.setLineDash([9,3]),h.drawLines(t,e,i,this.surfaceFilter(c.Platforms,s),n),t.setLineDash([]),h.drawLines(t,e,i,this.surfaceFilter(c.Walls,s),n),h.drawLines(t,e,i,this.surfaceFilter(c.Ceils,s),n)}))}drawBgs(t,e){if(!this.bgs)return;const i=this.elapsedSeconds,s=n.Point.Zero.minus(this.camera.Current);this.bgs.forEach((n=>n.drawFrame(t,s,e,i,!1,1)))}draw(t,e,i=!1,s=!1){var n,o;const r=this.camera.Current;this.drawBgs(t,e),s&&(t.translate(.5,.5),this.drawSurfaces(t,e,r),h.drawLines(t,e,r,this.loadEnter,"white"),h.drawLines(t,e,r,this.loadExit,"yellow"),t.translate(-.5,-.5)),null===(n=this.char)||void 0===n||n.draw(t,r,e,i),null===(o=this.entities)||void 0===o||o.forEach((s=>s.draw(t,r,e,i)))}}e.Level=h,h.perpLen=20,h.wallAngle=0*Math.PI/180,h.colors={[r.default.Normal]:"#2F4F4F",[r.default.Ice]:"aqua"},h.surfaceTypesKeys=Object.keys(r.default).filter((t=>Number.isNaN(+t))).map((t=>r.default[t]))},3723:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(3427),o=s(i(4640)),r=s(i(9712)),a=i(7017),l=s(i(179)),u={walls:[...(0,a.positionsFromPoints)([new n.Point(150,160),new n.Point(150,160)]).map((t=>Object.assign(Object.assign({},t),{levelId:l.default.beggining}))),...(0,a.positionsFromPoints)([n.Point.Zero,new n.Point(48,0),new n.Point(48,160),new n.Point(416,160),new n.Point(480,128),new n.Point(512,128),new n.Point(512,64),new n.Point(464,64),new n.Point(432,36),new n.Point(432,0)]).map(((t,e)=>5===e?Object.assign(Object.assign({},t),{levelId:l.default.s1,zone:0}):t))],entities:[],backgrounds:[{link:o.default,frameSize:512}],music:r.default,musicLoop:9.109};e.default=u},179:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.test=0]="test",t[t.test2=1]="test2",t[t.winTheGame=2]="winTheGame",t[t.beggining=3]="beggining",t[t.s1=4]="s1",t[t.s2=5]="s2",t[t.s3=6]="s3"}(i||(i={})),e.default=i},9225:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.LevelId=e.levelList=void 0;const n=i(3427),o=s(i(179));e.LevelId=o.default;const r=s(i(3411)),a=s(i(609)),l=s(i(3723)),u={minSize:n.Point.Zero,walls:[],entities:[]},c={[o.default.test]:r.default,[o.default.test2]:a.default,[o.default.winTheGame]:u,[o.default.beggining]:l.default,[o.default.s1]:l.default,[o.default.s2]:u,[o.default.s3]:u};e.levelList=c},609:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(3427),o=s(i(9770)),r=s(i(5215)),a=i(7017),l=s(i(179)),u={walls:[...(0,a.positionsFromPoints)([new n.Point(150,199),new n.Point(150,200)]).map((t=>Object.assign(Object.assign({},t),{levelId:l.default.test2}))),...(0,a.positionsFromPoints)([n.Point.Zero,new n.Point(0,100),new n.Point(0,200),new n.Point(200,200),new n.Point(200,400),new n.Point(0,500),new n.Point(0,600),new n.Point(200,500),new n.Point(400,500),new n.Point(600,600),new n.Point(600,500),new n.Point(400,400),new n.Point(400,200),new n.Point(600,200),new n.Point(600,100),new n.Point(600,0),new n.Point(350,0),new n.Point(250,0),n.Point.Zero]).map(((t,e)=>7===e?Object.assign(Object.assign({},t),{type:o.default.Ice}):1===e?Object.assign(Object.assign({},t),{levelId:l.default.test2,zone:3}):5===e?Object.assign(Object.assign({},t),{levelId:l.default.test,zone:1}):9===e?Object.assign(Object.assign({},t),{levelId:l.default.test,zone:0}):13===e?Object.assign(Object.assign({},t),{levelId:l.default.test2,zone:1}):16===e?Object.assign(Object.assign({},t),{levelId:l.default.winTheGame,zone:-1}):t)),...(0,a.positionsFromPoints)([new n.Point(200,400),new n.Point(250,400)]),...(0,a.positionsFromPoints)([new n.Point(350,400),new n.Point(400,400)]),...(0,a.positionsFromPoints)([new n.Point(250,300),new n.Point(350,300)]),...(0,a.positionsFromPoints)([new n.Point(200,200),new n.Point(250,200)]),...(0,a.positionsFromPoints)([new n.Point(350,200),new n.Point(400,200)]),...(0,a.positionsFromPoints)([new n.Point(250,100),new n.Point(350,100)])],entities:[],music:r.default,musicLoop:21.418};e.default=u},3411:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(3427),o=s(i(9770)),r=s(i(5669)),a=i(7017),l=s(i(179)),u=[...(0,a.positionsFromPoints)([n.Point.Zero,new n.Point(0,400),new n.Point(200,400),new n.Point(200,500),new n.Point(400,500),new n.Point(400,400),new n.Point(800,400),new n.Point(800,0),n.Point.Zero]),{position:new n.Rectangle(200,300,200,0).DiagonalA,platform:!0},{position:new n.Rectangle(150,50,150,150).DiagonalA,platform:!0},{position:new n.Rectangle(300,200,200,0).DiagonalA,platform:!0},...(0,a.positionsFromPoints)([new n.Point(780,250),new n.Point(750,250),new n.Point(650,300),new n.Point(600,340),new n.Point(560,350)]),...(0,a.positionsFromPoints)([new n.Point(550,250),new n.Point(560,240)]),...(0,a.positionsFromPoints)([new n.Point(200,400),new n.Point(210,400),new n.Point(210,500)]),...(0,a.positionsFromPoints)([new n.Point(750,200),new n.Point(700,160),new n.Point(610,130)],!0),...(0,a.positionsFromPoints)([new n.Point(250,450),new n.Point(350,420)],!1),...(0,a.positionsFromPoints)([new n.Point(200,210),new n.Point(240,240)],!1),...(0,a.positionsFromPoints)([new n.Point(750,20),new n.Point(800,20)]),...(0,a.positionsFromPoints)([new n.Point(750,120),new n.Point(800,120)])];u[1].type=o.default.Ice,u[5].type=o.default.Ice;const c=[{position:new n.Rectangle(100,100,0,100).DiagonalA,levelId:l.default.test},{position:new n.Rectangle(750,20,0,100).DiagonalA,levelId:l.default.test2,zone:1}],h={minSize:new n.Point(800,500),walls:u.concat(c),entities:[],music:r.default,musicLoop:11.358};e.default=h},3902:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.moveRight=0]="moveRight",t[t.moveLeft=1]="moveLeft",t[t.jump=2]="jump",t[t.sit=3]="sit",t[t.run=4]="run",t[t.attackLight=5]="attackLight",t[t.attackHeavy=6]="attackHeavy",t[t.attackRange=7]="attackRange",t[t.zoomUp=8]="zoomUp",t[t.zoomDown=9]="zoomDown",t[t.pause=10]="pause",t[t.flipLeft=11]="flipLeft",t[t.flipRight=12]="flipRight"}(i||(i={})),e.default=i},309:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ControlsAction=e.ControlsSettings=e.Controls=void 0;const n=s(i(3902));e.ControlsAction=n.default;const o=s(i(7695));e.ControlsSettings=o.default;class r{constructor(t){this.buttons=new Set,this.settings=t,this.initListeners()}initListeners(){document.addEventListener("keydown",this.buttonPress.bind(this)),document.addEventListener("keyup",this.buttonRelease.bind(this))}buttonPress(t){t.repeat||r.ignoreKeys.has(t.code)||this.buttons.add(t.code)}buttonRelease(t){t.preventDefault(),this.buttons.size&&this.buttons.delete(t.code)}has(t,e=!1){return[...this.settings.get(t)].some((t=>e?this.buttons.delete(t):this.buttons.has(t)))}}e.Controls=r,r.ignoreKeys=new Set(["ControlLeft","F5","F12","AltLeft","AltRight","Tab"])},7695:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(3902));e.default=class{constructor(){this.settings={[n.default.moveRight]:new Set(["KeyD","ArrowRight"]),[n.default.moveLeft]:new Set(["KeyA","ArrowLeft"]),[n.default.jump]:new Set(["KeyW","ArrowUp"]),[n.default.sit]:new Set(["KeyS","ArrowDown"]),[n.default.run]:new Set(["Space"]),[n.default.attackLight]:new Set(["KeyI"]),[n.default.attackHeavy]:new Set(["KeyO"]),[n.default.attackRange]:new Set(["KeyP"]),[n.default.zoomUp]:new Set(["Equal","NumpadAdd"]),[n.default.zoomDown]:new Set(["Minus","NumpadSubtract"]),[n.default.pause]:new Set(["Escape"]),[n.default.flipLeft]:new Set(["KeyQ"]),[n.default.flipRight]:new Set(["KeyE"])}}set(t,e){this.settings[t]=new Set(e)}get(t){return this.settings[t]}}},5341:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GameSettings=void 0;const s=i(3427);class n{constructor(t=0,e=10){this.drawBoxes=!0,this.drawSurfaces=!0,this.fpsDisplay=!0,this.timeDisplay=!0,this.fpsLimitSet=0,this.fpsLimitSafer=0,this.fpsLimitMin=15,this.frameTimeLimitMin=1/0,this.frameTimeLimit=1/0,this.renderSize=s.Point.Zero,this.renderZone=null,this.zoom=4,this.zoomMax=4,this.zoomMin=1,this.zoomSubscribers=[],this.FpsLimit=t,this.fpsLimitMin=e,this.frameTimeLimitMin=n.FpsToTimeLimit(e)}get DrawBoxes(){return this.drawBoxes}set DrawBoxes(t){this.drawBoxes=t}get DrawSurfaces(){return this.drawSurfaces}set DrawSurfaces(t){this.drawSurfaces=t}get FpsDisplay(){return this.fpsDisplay}set FpsDisplay(t){this.fpsDisplay=t}get TimeDisplay(){return this.timeDisplay}set TimeDisplay(t){this.timeDisplay=t}get FrameTimeLimit(){return this.frameTimeLimit}set FrameTimeLimit(t){this.FpsLimit=Math.ceil(1e3/t)}get FrameTimeLimitMin(){return this.frameTimeLimitMin}get FrameLimitSafer(){return this.fpsLimitSafer}set FrameLimitSafer(t){this.FpsLimit=t}get FpsLimitMin(){return this.fpsLimitMin}get FpsLimit(){return this.fpsLimitSet}set FpsLimit(t){this.fpsLimitSet=t,this.fpsLimitSafer=t&&Math.max(Math.min(t+n.fpsLimitAdd,t*n.fpsLimitMult),this.fpsLimitMin),this.frameTimeLimit=n.FpsToTimeLimit(this.fpsLimitSafer)}static FpsToTimeLimit(t){return 1e3/t}get RenderSize(){return this.renderSize}set RenderSize(t){this.renderSize=t}RenderSizeSet(t){this.renderSize=new s.Point(t.width,t.height)}RenderSizeGet(){return{width:this.renderSize.X,height:this.renderSize.Y}}setRenderZone(t){this.renderZone=t}getRenderZone(){return this.renderZone}get ZoomMax(){return this.zoomMax}get ZoomMin(){return this.zoomMin}get Zoom(){return this.zoom}set Zoom(t){const e=Math.min(this.zoomMax,Math.max(t,this.zoomMin));e!==this.zoom&&(this.zoom=e,this.zoomSubscribers.forEach((t=>t())))}ZoomChangeSubscribe(t){return this.zoomSubscribers.push(t),()=>{const e=this.zoomSubscribers.indexOf(t);e>-1&&this.zoomSubscribers.splice(e,1)}}}e.GameSettings=n,n.fpsLimitAdd=1,n.fpsLimitMult=1.1},8798:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SoundPlay=void 0;class i{constructor(){this.musicSubscribers=[],this.musicVolumeSubscribers=[],this.musicVolume=1,this.soundSubscribers=[],this.soundVolumeSubscribers=[],this.soundsVolume=1}get MusicVolume(){return this.musicVolume}set MusicVolume(t){this.musicVolume=t,this.musicVolumeSubscribers.forEach((e=>e(t)))}get SoundsVolume(){return this.soundsVolume}set SoundsVolume(t){this.soundsVolume=t,this.soundVolumeSubscribers.forEach((e=>e(t)))}static subscribe(t,e){return t.push(e),()=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)}}musicSubscribe(t){return i.subscribe(this.musicSubscribers,t)}soundSubscribe(t){return i.subscribe(this.soundSubscribers,t)}musicVolumeSubscribe(t){return t(this.musicVolume),i.subscribe(this.musicVolumeSubscribers,t)}soundVolumeSubscribe(t){return t(this.soundsVolume),i.subscribe(this.soundVolumeSubscribers,t)}playMusic(t,e){this.musicSubscribers.forEach((i=>i(t,e)))}playSound(t){this.soundSubscribers.forEach((e=>e(t)))}}e.SoundPlay=i},3427:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=e.Line=e.Point=void 0;const n=s(i(4847));e.Point=n.default;const o=s(i(542));e.Line=o.default;const r=s(i(2284));e.Rectangle=r.default},542:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(4847));class o{constructor(t,e){this.a=t,this.b=e,this.direction=e.minus(t),this.minX=Math.min(this.a.X,this.b.X),this.maxX=Math.max(this.a.X,this.b.X),this.minY=Math.min(this.a.Y,this.b.Y),this.maxY=Math.max(this.a.Y,this.b.Y),this.difXabs=this.maxX-this.minX,this.difYabs=this.maxY-this.minY}get A(){return this.a}get B(){return this.b}static get Zero(){return new o(n.default.Zero,n.default.Zero)}get Direction(){return this.direction}get MinX(){return this.minX}get MaxX(){return this.maxX}get MinY(){return this.minY}get MaxY(){return this.maxY}get DifXabs(){return this.difXabs}get DifYabs(){return this.difYabs}}e.default=o},4847:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e){this.x=t,this.y=e}get X(){return this.x}set X(t){this.x=t}get Y(){return this.y}set Y(t){this.y=t}static get Zero(){return new i(0,0)}plus(t){return new i(this.x+t.X,this.y+t.Y)}minus(t){return new i(this.x-t.X,this.y-t.Y)}multiply(t){return new i(this.x*t,this.y*t)}multiplyPoint(t){return new i(this.x*t.X,this.y*t.Y)}divide(t){return new i(this.x/t,this.y/t)}divideFloor(t){return new i(Math.floor(this.x/t),Math.floor(this.y/t))}}e.default=i},2284:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(542)),o=s(i(4847));class r{constructor(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s,this.right=this.x+this.width,this.bottom=this.y+this.height,this.size=new o.default(i,s),this.topLeft=new o.default(this.x,this.y),this.topRight=new o.default(this.right,this.y),this.bottomLeft=new o.default(this.x,this.bottom),this.bottomRight=new o.default(this.right,this.bottom),this.diagonalA=new n.default(this.topLeft,this.bottomRight),this.diagonalB=new n.default(this.topRight,this.bottomLeft),this.leftLine=new n.default(this.topLeft,this.bottomLeft),this.rightLine=new n.default(this.topRight,this.bottomRight),this.topLine=new n.default(this.topLeft,this.topRight),this.bottomLine=new n.default(this.bottomLeft,this.bottomRight)}get X(){return this.x}get Left(){return this.x}get Width(){return this.width}get Right(){return this.right}get Y(){return this.y}get Top(){return this.y}get Height(){return this.height}get Bottom(){return this.bottom}get DiagonalA(){return this.diagonalA}get DiagonalB(){return this.diagonalB}get LeftLine(){return this.leftLine}get RightLine(){return this.rightLine}get TopLine(){return this.topLine}get BottomLine(){return this.bottomLine}get TopLeft(){return this.topLeft}get TopRight(){return this.topRight}get BottomLeft(){return this.bottomLeft}get BottomRight(){return this.bottomRight}get Position(){return this.topLeft}get Size(){return this.size}static get Zero(){return new r(0,0,0,0)}static fromLine(t){return new r(t.MinX,t.MinY,t.MaxX-t.MinX,t.MaxY-t.MinY)}multiply(t){return new r(this.Left*t,this.Top*t,this.width*t,this.height*t)}plusPoint(t){return new r(this.Left+t.X,this.Top+t.Y,this.width,this.height)}minusPoint(t){return new r(this.Left-t.X,this.Top-t.Y,this.width,this.height)}}e.default=r},6514:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{static setSoundPlay(t){i.soundPlay=t}static sound(t){i.soundPlay.playSound(t)}static music(t,e){t!==i.currentMusic&&(i.currentMusic=t,i.soundPlay.playMusic(t,e))}}e.default=i},9325:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteAnimation=void 0;const s=i(3427);class n{constructor(t){this.frames=[],this.drawPosition=new s.Point(0,0),this.drawReversePosition=new s.Point(0,0),this.lastFrameEnds=0,this.currentFrame=0,n.checkConfig(t),this.sprite=t,this.imgSource=new Image,this.imgSource.src=t.link,this.imgSource.addEventListener("load",this.imgOnload.bind(this)),t.position&&(this.drawPosition=t.position,this.drawReversePosition=new s.Point(-t.position.X,t.position.Y))}get Ends(){return this.lastFrameEnds}static initFrames(t,e){let i=0,n=0,o=0;const r=[],a=e.vertical?t.naturalHeight:t.naturalWidth,l=(e.vertical?t.naturalWidth:t.naturalHeight)/(e.hasReverse?2:1);do{const t=e.frameSizeOverride&&e.frameSizeOverride[i]||e.frameSize;o+=e.frameLengthOverride&&e.frameLengthOverride[i]||e.frameLength||1;const a={position:e.vertical?new s.Rectangle(0,n,l,t):new s.Rectangle(n,0,t,l),ends:o};e.hasReverse&&(a.positionReverse=e.vertical?new s.Rectangle(l,n,l,t):new s.Rectangle(n,l,t,l)),r.push(a),i+=1,n+=t}while(n<a);return r}static isBelow0(t){return t<=0}static isAnyBelow0(t){return t&&Object.keys(t).find((t=>n.isBelow0(Number(t))))}static checkConfig(t){if(n.isBelow0(t.frameSize)||n.isAnyBelow0(t.frameSizeOverride))throw new Error(`${t.link} - frameWidth can't be below 1`);if(n.isBelow0(t.frameLength||1)||n.isAnyBelow0(t.frameLengthOverride))throw new Error(`${t.link} - frameLength can't be below 1`)}imgOnload(){this.frames=n.initFrames(this.imgSource,this.sprite),this.lastFrameEnds=this.frames.at(-1).ends}getFrame(t){if(!this.lastFrameEnds)return;const e=t%this.lastFrameEnds;for(;!(e>(this.currentFrame?this.frames[this.currentFrame-1].ends:0)&&e<this.frames[this.currentFrame].ends);)this.currentFrame+=1,this.currentFrame===this.frames.length&&(this.currentFrame=0);return this.frames[this.currentFrame]}static draw(t,e,i,s,o,r=8){const a=n.aligns[r](i,s,o);if(!a)throw new Error("align is not implemented");e.drawImage(t,s.X,s.Y,s.Width,s.Height,a.X,a.Y,Math.round(s.Width*o),Math.round(s.Height*o))}drawFrame(t,e,i,s,o=!1,r=8){const a=this.getFrame(s);if(!a)return;const l=e.plus((o?this.drawReversePosition:this.drawPosition).multiply(i)),u=o&&a.positionReverse?a.positionReverse:a.position;n.draw(this.imgSource,t,l,u,i,r)}}e.SpriteAnimation=n,n.Empty={},n.aligns={1:t=>t,8:(t,e,i)=>new s.Point(Math.round(t.X-e.Width*i/2),Math.round(t.Y-e.Height*i))}},9770:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(5983));e.default=n.default},5983:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Normal=0]="Normal",t[t.Ice=1]="Ice"}(i||(i={})),e.default=i},3607:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),(new(s(i(1495)).default)).start()},1642:function(t,e){var i=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Api=void 0;class s{constructor(t){this.baseUrl=t}static getQueryString(t){return t?`?${Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}`:""}static getRequestInit(t,e){return{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}}static getUrl(t,e,i){return`${t}${e}${s.getQueryString(i)}`}getThisUrl(t,e){return s.getUrl(this.baseUrl,t,e)}get(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t,e),{method:"GET"})}))}post(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t),s.getRequestInit("POST",e))}))}put(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t),s.getRequestInit("PUT",e))}))}delete(t){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t),{method:"DELETE"})}))}patch(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t,e),{method:"PATCH"})}))}}e.Api=s},68:function(t,e,i){var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.TimeServices=void 0;const n=i(4530);class o extends n.ApiService{createTimeData(t){const e=Object.create(null,{create:{get:()=>super.create}});return s(this,void 0,void 0,(function*(){return yield e.create.call(this,t)}))}getTimesData(){const t=Object.create(null,{getAll:{get:()=>super.getAll}});return s(this,void 0,void 0,(function*(){return t.getAll.call(this,{})}))}getTimeData(t){const e=Object.create(null,{getId:{get:()=>super.getId}});return s(this,void 0,void 0,(function*(){return e.getId.call(this,t)}))}deleteTimeData(t){const e=Object.create(null,{delete:{get:()=>super.delete}});return s(this,void 0,void 0,(function*(){return e.delete.call(this,t)}))}updateTimeData(t,e){const i=Object.create(null,{update:{get:()=>super.update}});return s(this,void 0,void 0,(function*(){return i.update.call(this,t,e)}))}}e.TimeServices=o},4530:function(t,e,i){var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Api=e.ApiService=void 0;const n=i(1642);Object.defineProperty(e,"Api",{enumerable:!0,get:function(){return n.Api}}),e.ApiService=class{constructor(t,e,i){this.api=t,this.url=e,this.options=i}getIdUrl(t){return`${this.url}/${t}`}getAll(t){return s(this,void 0,void 0,(function*(){const e=yield this.api.get(this.url,t);if(!e.ok)return{totalCount:0};const i=e.headers.get(this.options.totalCount);return{totalCount:i?Number.parseInt(i,10):0,values:yield e.json()}}))}getId(t){return s(this,void 0,void 0,(function*(){const e=yield this.api.get(this.getIdUrl(t));return e.ok?e.json():e.status}))}create(t){return s(this,void 0,void 0,(function*(){const e=yield this.api.post(this.url,t);return e.ok?e.json():void 0}))}delete(t){return s(this,void 0,void 0,(function*(){return(yield this.api.delete(this.getIdUrl(t))).ok}))}update(t,e){return s(this,void 0,void 0,(function*(){const i=yield this.api.put(this.getIdUrl(t),e);return i.ok?i.json():void 0}))}}},786:function(t,e,i){var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.UserServices=void 0;const n=i(4530);class o extends n.ApiService{createUser(t){const e=Object.create(null,{create:{get:()=>super.create}});return s(this,void 0,void 0,(function*(){return yield e.create.call(this,t)}))}getUsers(){const t=Object.create(null,{getAll:{get:()=>super.getAll}});return s(this,void 0,void 0,(function*(){return t.getAll.call(this,{})}))}getUser(t){const e=Object.create(null,{getId:{get:()=>super.getId}});return s(this,void 0,void 0,(function*(){return e.getId.call(this,t)}))}deleteUser(t){const e=Object.create(null,{delete:{get:()=>super.delete}});return s(this,void 0,void 0,(function*(){return e.delete.call(this,t)}))}updateUser(t,e){const i=Object.create(null,{update:{get:()=>super.update}});return s(this,void 0,void 0,(function*(){return i.update.call(this,t,e)}))}}e.UserServices=o},1999:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SoundPlay=e.ControlsAction=e.ControlsSettings=e.GameSettings=e.Api=e.ApiService=void 0;const s=i(4530);Object.defineProperty(e,"ApiService",{enumerable:!0,get:function(){return s.ApiService}}),Object.defineProperty(e,"Api",{enumerable:!0,get:function(){return s.Api}});const n=i(309);Object.defineProperty(e,"ControlsSettings",{enumerable:!0,get:function(){return n.ControlsSettings}}),Object.defineProperty(e,"ControlsAction",{enumerable:!0,get:function(){return n.ControlsAction}});const o=i(5341);Object.defineProperty(e,"GameSettings",{enumerable:!0,get:function(){return o.GameSettings}});const r=i(8798);Object.defineProperty(e,"SoundPlay",{enumerable:!0,get:function(){return r.SoundPlay}})},9457:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(5591)),o=s(i(3535)),r=i(8055),a=s(i(5429)),l=i(4989),u=s(i(3103)),c=s(i(4766)),h=s(i(6718));var d;!function(t){t[t.canvas=0]="canvas",t[t.placaholder=1]="placaholder",t[t.sounds=2]="sounds",t[t.settingGame=3]="settingGame"}(d||(d={}));class f extends r.View{constructor(t,e){super(t,n.default,o.default),this.views={},this.services=e}createView(t){switch(t){case d.canvas:{const t=new a.default(f.contentId,this.services.gameSettings);return this.game=new l.Game(this.services.controls.settings,this.services.gameSettings,this.services.sounds.play),this.game.start(this),t}case d.placaholder:return new u.default(f.contentId,this.services.api.times);case d.sounds:return new c.default("sounds",this.services.sounds.subsribe);case d.settingGame:return new h.default(f.contentId,this.services.gameSettings);default:throw new Error(`${t} doesn't exit`)}}getView(t){return this.views[t]||(this.views[t]=this.createView(t)),this.views[t]}initListeners(){var t,e,i;null===(t=this.getElementById("toCanvas"))||void 0===t||t.addEventListener("click",this.changeTo.bind(this,d.canvas)),null===(e=this.getElementById("toPlaceholder"))||void 0===e||e.addEventListener("click",this.changeTo.bind(this,d.placaholder)),null===(i=this.getElementById("toSettingGame"))||void 0===i||i.addEventListener("click",this.changeTo.bind(this,d.settingGame))}append(){super.append(),this.initListeners(),this.getView(d.sounds).append(),this.changeTo(d.placaholder)}changeTo(t){return this.currentViewId!==t&&(this.currentViewId=t,this.getView(t).replace(),!0)}winTheGame(t){alert(JSON.stringify(t)),console.log(this)}pauseTheGame(){alert("pause!"),console.log(this)}characterHp(t){alert(t),console.log(this)}}f.contentId=o.default.content,e.default=f},3103:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(5799)),o=s(i(4392)),r=i(8055);class a extends r.View{constructor(t,e){super(t,n.default,o.default),this.timeTable=this.getElementById("timeTable"),this.services=e,this.initTimeTable()}initTimeTable(){return this.timeTable}}e.default=a},5429:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(4340)),o=s(i(90)),r=i(8055);class a extends r.View{constructor(t,e){super(t,n.default,o.default),this.previousWindowWidth=0,this.previousWindowHeight=0,this.gameSettings=e,this.canvas=this.initCanvas(),this.gameSettings.setRenderZone(this.canvas.getContext("2d"));const i=this.setCanvasSize.bind(this);setTimeout(i),setInterval(i,500)}initCanvas(){const t=this.getElementById("canvas");return t.addEventListener("wheel",this.changeZoom.bind(this),{passive:!0}),window.addEventListener("resize",this.setCanvasSize.bind(this)),t}setCanvasSize(){if(this.previousWindowWidth===window.innerWidth&&this.previousWindowHeight===window.innerHeight)return;this.previousWindowWidth=window.innerWidth,this.previousWindowHeight=window.innerHeight,this.canvas.style.width="100%";const t=window.innerWidth-this.canvas.clientWidth,e=this.canvas.getBoundingClientRect().top,i=Math.floor(window.innerWidth-t),s=Math.floor(window.innerHeight-e-t);this.gameSettings.RenderSizeSet({width:i,height:s}),this.canvas.width=i,this.canvas.height=s,this.canvas.style.width=`${i}px`}changeZoom(t){this.gameSettings.Zoom+=t.deltaY<0?1:-1,this.setCanvasSize()}}e.default=a},8055:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;class i{constructor(t,e,s){this.parentId=t,this.templateItems=i.initTemplate(i.initTemplateString(e,s))}static initTemplateString(t,e){return Object.keys(e).reduce(((t,i)=>t.replace(new RegExp(`{{${i}}}`,"g"),e[i])),t)}setParent(t){this.parentId=t}static getParent(t){return document.getElementById(t)||document.getElementsByClassName(t)[0]||document.getElementsByTagName(t)[0]}getParent(){return i.getParent(this.parentId)}static initTemplate(t){const e=document.createElement("template");return e.innerHTML=t,[...e.content.children]}static getElementById(t,e){let s=t.find((t=>t.id===e));if(s)return s;for(let n=0;n<t.length;n+=1)if(t[n].children.length&&(s=i.getElementById([...t[n].children],e),s))return s}getElementById(t){return i.getElementById(this.templateItems,t)}replace(){const t=this.getParent();t&&(t.innerHTML="",this.append(t))}append(t=this.getParent()){t&&this.templateItems.forEach((e=>{t.append(e)}))}}e.View=i},6718:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(119)),o=s(i(3804)),r=i(8055);class a extends r.View{constructor(t,e){super(t,n.default,o.default),this.gameSettings=e,this.initSetting()}initSetting(){const t=this.getElementById("boxes__drow");t.checked=this.gameSettings.DrawBoxes,null==t||t.addEventListener("click",(()=>{this.gameSettings.DrawBoxes=t.checked}));const e=this.getElementById("fps__display");e.checked=this.gameSettings.FpsDisplay,null==e||e.addEventListener("click",(()=>{this.gameSettings.FpsDisplay=e.checked}));const i=this.getElementById("draw__surfaces");i.checked=this.gameSettings.DrawSurfaces,null==i||i.addEventListener("click",(()=>{this.gameSettings.DrawSurfaces=i.checked}));const s=this.getElementById("fps__Limit");s.value=String(this.gameSettings.FpsLimit),s.addEventListener("change",(t=>{const e=+t.target.value;this.gameSettings.FpsLimit=e}));const n=this.getElementById("zoom__game");n.value=String(this.gameSettings.Zoom),n.addEventListener("change",(t=>{const e=+t.target.value;this.gameSettings.Zoom=e}))}}e.default=a},4766:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(4112)),o=s(i(6125)),r=i(8055);class a extends r.View{constructor(t,e){super(t,n.default,o.default),this.soundsActive=[],this.soundsIdle=[],this.soundVolume=1,this.musicLoop=null,this.musicSound=this.getElementById("music"),e.musicSubscribe(this.playMusic.bind(this)),e.soundSubscribe(this.playSound.bind(this)),e.musicVolumeSubscribe(this.setMusicVolume.bind(this)),e.soundVolumeSubscribe(this.setSoundVolume.bind(this)),this.soundsDiv=this.getElementById("sounds"),this.musicSound.addEventListener("timeupdate",this.musicCheck.bind(this))}playMusic(t,e){this.musicSound.src=t;const i=e||0;this.musicLoop=i<0?null:i}musicCheck(){this.musicSound.currentTime>this.musicSound.duration-a.buffer&&this.musicEnd()}musicEnd(){null!==this.musicLoop&&(this.musicSound.currentTime=this.musicLoop,this.musicSound.play())}getIdleSound(){if(this.soundsIdle.length)return this.soundsIdle.shift();const t=new Audio;return t.addEventListener("ended",this.soundEnded.bind(this)),t.volume=this.soundVolume,this.soundsDiv.append(t),t}playSound(t){const e=this.getIdleSound();e.src=t,e.load(),e.play(),this.soundsActive.push(e)}soundEnded(t){const e=this.soundsActive.indexOf(t.target);if(e<0)throw new Error("active sound not found");this.soundsIdle.push(this.soundsActive.splice(e,1)[0])}setMusicVolume(t){this.musicSound.volume=t}static setVolumeArr(t,e){for(let i=t.length-1;i>-1;i-=1)t[i].volume=e}setSoundVolume(t){this.soundVolume=t,a.setVolumeArr(this.soundsActive,t),a.setVolumeArr(this.soundsIdle,t)}}a.buffer=.32,e.default=a}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i(3607)})();