(()=>{"use strict";var t={995:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s=i.p+"340fb47fe5db94b7be1c182b5a72225c.png"},591:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<nav class="{{navigation}}"> <button id="toCanvas" class="{{button}} {{button_1}}">TO CANVAS</button> <button id="toPlaceholder" class="{{button}} {{button_1}}">TO PLACEHOLDER</button> </nav> <main class="{{content}}"></main> '},340:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<div class="canvas"> <div id="bg" class="{{bg}}"></div> <canvas id="canvas" class="{{canvas}}"></canvas> </div> '},903:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s='<div class="placeholder"> placeholder </div> '},535:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={button:"app__button",button_1:"app__button_1",button_disabled:"app__button_disabled",content:"app__content",navigation:"app__navigation"}},90:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={bg:"canvas__bg",canvas:"canvas__canvas"}},600:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={}},495:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(642),r=s(i(185)),a=s(i(302)),o=s(i(457));class l{constructor(){this.contolsSettings=new r.default,new n.Api("http://localhost:3000/");const t={controlsSettings:new r.default,gameSettings:new a.default,api:{placeholder1:null,placeholder2:null}};this.page=new o.default("body",t)}start(){this.page.append(),l.taskConsole()}static taskConsole(){}}e.default=l},192:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(202));class r{constructor(t){this.rect=new n.default(t.X-t.Width/2,-t.Y,t.Width,t.Height),this.rectReverse=new n.default(-t.X-t.Width/2,-t.Y,t.Width,t.Height),this.rectCombined=r.initCombined(this.rect,this.rectReverse)}get RectCombined(){return this.rectCombined}static initCombined(t,e){const i=Math.min(t.X,e.X),s=Math.max(t.X+t.Width,e.X+e.Width),r=Math.min(t.Y,e.Y),a=Math.min(t.Y,e.Y);return new n.default(i,s,r,a)}hit(t){throw new Error("Box.hit is not implemented!")}draw(t,e,i,s){t.strokeStyle=e;const n=s?this.rectReverse:this.rect,r=Math.round(i.X+n.X),a=Math.round(i.Y+n.Y);t.strokeRect(r,a,n.Width,n.Height)}}e.default=r},241:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(267)),r=s(i(861)),a=s(i(658)),o=s(i(804)),l=s(i(230)),u=i(238);class h extends r.default{constructor(t){super(o.default.Zero,u.states),this.jumps=1,this.jumpHold=!1,this.conrols=t}processWalk(t,e,i,s){const n=this.surface?h.cntrlMaxXVel[+t]:Math.max(Math.abs(this.velocityPerSecond.X),h.cntrlMaxXVel[0]);e&&(this.velocityPerSecond.X-=s,this.direction=a.default.left),i&&(this.velocityPerSecond.X+=s,this.direction=a.default.right),Math.abs(this.velocityPerSecond.X)>n&&(this.velocityPerSecond.X=e?-n:n)}processSlowDown(t){this.currentState!==u.CharacterState.Jump&&(this.velocityPerSecond.X<0?(this.velocityPerSecond.X+=t,this.velocityPerSecond.X>0&&(this.velocityPerSecond.X=0)):(this.velocityPerSecond.X-=t,this.velocityPerSecond.X<0&&(this.velocityPerSecond.X=0)))}processJump(){this.conrols.has(n.default.jump)?this.jumpHold||(this.surface&&(this.jumps=2),this.jumps&&(this.surface=void 0,this.velocityPerSecond.Y=-h.jumpPower,this.position.Y-=1,this.jumps-=1,this.jumpHold=!0)):this.jumpHold=!1}processControls(t){const e=this.conrols.has(n.default.run),i=this.conrols.has(n.default.moveLeft),s=this.conrols.has(n.default.moveRight),r=t*(this.surface?this.surface.type&&h.cntrlChangeXVel[this.surface.type]||h.cntrlChangeXVel.default:h.cntrlChangeXVel.air);i||s?this.processWalk(e,i,s,r):this.processSlowDown(r),this.processJump()}frame(t){this.processControls(t),super.frame(t)}}h.cntrlMaxXVel={0:100,1:180},h.cntrlChangeXVel={default:1500,air:700,[l.default.Ice]:400},h.jumpPower=110,e.default=h},238:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.states=e.CharacterState=void 0;const n=s(i(581)),r=s(i(561)),a=s(i(916)),o=s(i(202)),l=s(i(192));var u;!function(t){t[t.Idle=0]="Idle",t[t.Walk=1]="Walk",t[t.Run=2]="Run",t[t.Jump=3]="Jump",t[t.AttackNormal=4]="AttackNormal",t[t.AttackHeavy=5]="AttackHeavy",t[t.AttackRange=6]="AttackRange"}(u||(u={})),e.CharacterState=u;const h=new l.default(new o.default(2,40,10,36)),c={[u.Idle]:{sprite:a.default,hurtbox:h},[u.Walk]:{sprite:n.default,hurtbox:h},[u.Run]:{sprite:r.default,hurtbox:h}};e.states=c},267:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.moveRight=0]="moveRight",t[t.moveLeft=1]="moveLeft",t[t.jump=2]="jump",t[t.sit=3]="sit",t[t.run=4]="run",t[t.attackLight=5]="attackLight",t[t.attackHeavy=6]="attackHeavy",t[t.attackRange=7]="attackRange"}(i||(i={})),e.default=i},848:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t){this.buttons=new Set,this.settings=t,this.initListeners()}initListeners(){document.addEventListener("keydown",this.buttonPress.bind(this)),document.addEventListener("keyup",this.buttonRelease.bind(this))}buttonPress(t){t.repeat||i.ignoreKeys.has(t.code)||(this.buttons.add(t.code),console.log("press",this.buttons))}buttonRelease(t){t.preventDefault(),this.buttons.delete(t.code),console.log("release",this.buttons)}has(t){return[...this.settings.get(t)].some((t=>this.buttons.has(t)))}}i.ignoreKeys=new Set(["ControlLeft","F5","AltLeft","AltRight","Tab"]),e.default=i},185:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(267));e.default=class{constructor(){this.settings={[n.default.moveRight]:new Set(["KeyD","ArrowRight"]),[n.default.moveLeft]:new Set(["KeyA","ArrowLeft"]),[n.default.jump]:new Set(["KeyW","ArrowUp"]),[n.default.sit]:new Set(["KeyS","ArrowDown"]),[n.default.run]:new Set(["Space"]),[n.default.attackLight]:new Set(["KeyI"]),[n.default.attackHeavy]:new Set(["KeyO"]),[n.default.attackRange]:new Set(["KeyP"])}}set(t,e){this.settings[t]=new Set(e)}get(t){return this.settings[t]}}},431:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(861)),r=i(891);class a extends n.default{constructor(t){super(t,r.states)}}e.default=a},891:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.states=e.PlaceholderState=void 0,function(t){t[t.Idle=0]="Idle"}(i||(i={})),e.PlaceholderState=i;const s={[i.Idle]:{}};e.states=s},861:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(970)),r=s(i(658)),a=s(i(804)),o=s(i(192)),l=s(i(202));class u{constructor(t,e,i){this.position=a.default.Zero,this.velocityPerSecond=a.default.Zero,this.gravity=100,this.states={},this.stateElapsedSeconds=0,this.direction=r.default.right,this.currentState=-1,this.animation=null,this.collision=l.default.Zero,this.position=t,e&&(this.states=u.initStates(e),this.State=i||Number(Object.keys(e)[0]))}set Position(t){this.position=t}get Position(){return this.position}get Collision(){return this.collision}set Surface(t){this.surface=t,t&&(this.velocityPerSecond.Y=this.gravity/1.8)}get OnSurface(){return!!this.surface}static getCollisionSimplified(t){return t.map((t=>t.RectCombined)).reduce(((t,e)=>o.default.initCombined(t,e)))}set State(t){if(!this.states[t])return this.currentState=-1,this.animation=null,void(this.collision=l.default.Zero);this.currentState=t,this.collision=u.getCollisionSimplified(this.states[this.currentState].collisionboxes),this.animation=this.states[this.currentState].animation||null}static concatBoxes(t,e){return(e||[]).concat(t||[])}static initStates(t){return Object.keys(t).reduce(((e,i)=>{const s=t[+i],r=u.concatBoxes(s.hitbox,s.hitboxes),a=u.concatBoxes(s.hurtbox,s.hurtboxes),o=a.length?a:r,l=u.concatBoxes(s.collisionbox,s.collisionboxes),h={hitboxes:r,hurtboxes:o,collisionboxes:l.length?l:a};return s.sprite&&Object.assign(h,{animation:new n.default(s.sprite)}),Object.assign(e,{[+i]:h}),e}),{})}frame(t){this.stateElapsedSeconds+=t,this.velocityPerSecond.Y+=t*this.gravity,this.position.X+=t*this.velocityPerSecond.X,this.position.Y+=t*this.velocityPerSecond.Y}drawPosition(t){const e=t;e.strokeStyle=u.clrs.pos,e.fillRect(Math.round(this.position.X),Math.round(this.position.Y),1,1)}drawBoxes(t){if(this.currentState<0)return;const e=this.states[this.currentState],i=this.position,s=!!this.direction;e.hurtbox&&e.hurtbox.draw(t,u.clrs.hurt,i,s),e.hurtboxes&&e.hurtboxes.forEach((e=>e.draw(t,u.clrs.hurt,i,s))),e.hitbox&&e.hitbox.draw(t,u.clrs.hit,i,s),e.hitboxes&&e.hitboxes.forEach((e=>e.draw(t,u.clrs.hit,i,s))),this.drawPosition(t)}draw(t,e=!1){if(this.animation){const e=this.stateElapsedSeconds;this.animation.drawFrame(t,this.position,e,!!this.direction)}e&&this.drawBoxes(t)}}u.clrs={hit:"red",hurt:"blue",pos:"green"},e.default=u},255:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(663)),r=s(i(431)),a={[n.default.Placeholder]:r.default};e.default=a},663:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Placeholder=0]="Placeholder"}(i||(i={})),e.default=i},658:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.right=0]="right",t[t.left=1]="left"}(i||(i={})),e.default=i},910:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(804));class r{constructor(t,e){this.a=t,this.b=e,this.minX=Math.min(this.a.X,this.b.X),this.maxX=Math.max(this.a.X,this.b.X),this.minY=Math.min(this.a.Y,this.b.Y),this.maxY=Math.max(this.a.Y,this.b.Y),this.difX=this.maxX-this.minX,this.difY=this.maxY-this.minY}get A(){return this.a}get B(){return this.b}static get Zero(){return new r(n.default.Zero,n.default.Zero)}get MinX(){return this.minX}get MaxX(){return this.maxX}get MinY(){return this.minY}get MaxY(){return this.maxY}get DifX(){return this.difX}get DifY(){return this.difY}}e.default=r},804:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e){this.x=t,this.y=e}get X(){return this.x}set X(t){this.x=t}get Y(){return this.y}set Y(t){this.y=t}static get Zero(){return new i(0,0)}plus(t){return new i(this.x+t.X,this.y+t.Y)}minus(t){return new i(this.x-t.X,this.y-t.Y)}multiply(t){return new i(this.x*t,this.y*t)}}e.default=i},202:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(910)),r=s(i(804));class a{constructor(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s;const a=this.x+this.w,o=this.y+this.h,l=new r.default(this.x,this.y),u=new r.default(a,this.y),h=new r.default(this.x,o),c=new r.default(a,o);this.diagonal=new n.default(l,c),this.leftLine=new n.default(l,h),this.rightLine=new n.default(u,c),this.topLine=new n.default(l,u),this.bottomLine=new n.default(h,c)}get X(){return this.x}get Width(){return this.w}get Y(){return this.y}get Height(){return this.h}get Diagonal(){return this.diagonal}get LeftLine(){return this.leftLine}get RightLine(){return this.rightLine}get TopLine(){return this.topLine}get BottomLine(){return this.bottomLine}static get Zero(){return new a(0,0,0,0)}}e.default=a},989:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const n=s(i(241)),r=s(i(848)),a=s(i(485)),o=s(i(714)),l=s(i(753));e.Game=class{constructor(t,e,i){this.lastFrame=0,this.levels={},this.char=new n.default(new r.default(t)),this.gameSettings=e,this.canvasHelper=i,this.initContext(),this.requestNextFrame(),this.levelCurrent=this.changeLevel({levelId:a.default.test})}initContext(){this.canvasHelper.c.font="48px serif",this.canvasHelper.c.fillStyle="white"}getLevel(t){return this.levels[t]||(this.levels[t]=new o.default(l.default[t])),this.levels[t]}changeLevel(t){const e=this.getLevel(t.levelId);return e.load(this.char,t.zone,t.position),e}requestNextFrame(){window.requestAnimationFrame(this.frame.bind(this))}processFrame(t){const{c:e,size:i}=this.canvasHelper;e.clearRect(0,0,i.X,i.Y),e.beginPath(),this.levelCurrent.frame(t/1e3),this.levelCurrent.draw(e,this.gameSettings.DrawBoxes),this.gameSettings.FpsDisplay&&e.fillText(`FPS: ${(1e3/t).toFixed(1)}`,5,10)}frame(t){const e=t-this.lastFrame;(!Number.isFinite(this.gameSettings.FrameTimeLimit)||e>this.gameSettings.FrameTimeLimit)&&(this.lastFrame&&this.processFrame(e),this.lastFrame=t),this.requestNextFrame()}}},714:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(230)),r=s(i(804)),a=s(i(255));class o{constructor(t){this.entities=[],this.surfaces=t.surfaces.map((t=>Object.assign(Object.assign({},t),{type:n.default.Normal}))),this.entitiesConfig=t.entities,this.loadEnter=t.loading,this.loadExit=t.loading.filter((t=>void 0!==t.zone))}static newEntity(t,e){return new t(e)}static initEntities(t){return t.map((t=>o.newEntity(a.default[t.type],t.position)))}load(t,e=0,i=0){this.entities=o.initEntities(this.entitiesConfig),this.char=t;const s=this.loadEnter[e<this.loadEnter.length?e:Math.floor(Math.random()*this.loadEnter.length)].position,n=s.B.minus(s.A).multiply(i).plus(s.A);this.char.Position=n}gravityCollision(t,e,i){const s=this.surfaces.filter((i=>i.position.MinX<=e.X&&i.position.MaxX>=e.X&&i.position.MinY<=Math.max(e.Y,t.Y)&&i.position.MaxY>=Math.min(e.Y,t.Y)));if(s.length){s.length>1&&s.sort(((t,e)=>t.position.MinY-e.position.MinY));for(let n=0;n<s.length;n+=1){const a=s[n],o=(t.X-a.position.MinX)/a.position.DifX;if(a.position.DifY*o+a.position.MinY<Math.floor(t.Y))continue;const l=(e.X-a.position.MinX)/a.position.DifX,u=Math.floor(a.position.DifY*l+a.position.MinY);if(i||!(u>Math.ceil(e.Y)))return{surface:a,point:new r.default(e.X,u)}}}}processCollision(t,e){const i=new r.default(t.Position.X,t.Position.Y);t.frame(e);const s=this.gravityCollision(i,t.Position,t.OnSurface);s&&(t.Position=s.point),t.Surface=null==s?void 0:s.surface}frame(t){var e;const i=this.char;this.processCollision(i,t),null===(e=this.entities)||void 0===e||e.forEach((e=>e.frame(t)))}static drawSurface(t,e){t.moveTo(e.position.A.X,e.position.A.Y),t.lineTo(e.position.B.X,e.position.B.Y)}draw(t,e){var i,s;null===(i=this.char)||void 0===i||i.draw(t,e),null===(s=this.entities)||void 0===s||s.forEach((i=>i.draw(t,e))),e&&(t.strokeStyle="black",this.surfaces.forEach((e=>o.drawSurface(t,e))),t.stroke())}}e.default=o},753:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(485)),r=s(i(994)),a={[n.default.test]:r.default};e.default=a},994:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(485)),r=s(i(202)),a=i(781),o=s(i(804)),l=[],u=[];l.push(...(0,a.surfaceListHelper)([o.default.Zero,new o.default(0,400),new o.default(200,400),new o.default(200,500),new o.default(400,500),new o.default(400,400),new o.default(800,400),new o.default(800,0),o.default.Zero])),l.push({position:new r.default(200,300,200,0).Diagonal,platform:!0}),l.push({position:new r.default(100,0,200,200).Diagonal,platform:!0});const h=n.default.test;u[0]={position:new r.default(100,100,0,100).Diagonal,levelId:h,zone:1};const c={size:new o.default(2e3,2e3),surfaces:l,entities:[],loading:u};e.default=c},781:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.surfaceListHelper=void 0;const n=s(i(910)),r=s(i(804));e.surfaceListHelper=t=>t.reduce(((t,e)=>{var i;return t.concat(new n.default((null===(i=t.at(-1))||void 0===i?void 0:i.B)||new r.default(0,0),e))}),[]).slice(1).map((t=>({position:t})))},485:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.test=0]="test"}(i||(i={})),e.default=i},230:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Normal=0]="Normal",t[t.Ice=1]="Ice"}(i||(i={})),e.default=i},302:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t=0){this.drawBoxes=!0,this.fpsDisplay=!0,this.fpsLimit=0,this.frameTimeLimit=1/0,this.FpsLimit=t}get DrawBoxes(){return this.drawBoxes}set DrawBoxes(t){this.drawBoxes=t}get FpsDisplay(){return this.fpsDisplay}set FpsDisplay(t){this.fpsDisplay=t}get FrameTimeLimit(){return this.frameTimeLimit}set FrameTimeLimit(t){this.FpsLimit=Math.ceil(1e3/t)}get FpsLimit(){return Math.max(this.fpsLimit-i.fpsLimitAdd,Math.round(this.fpsLimit/i.fpsLimitMult))}set FpsLimit(t){this.fpsLimit=t&&Math.min(t+i.fpsLimitAdd,t*i.fpsLimitMult),this.frameTimeLimit=1e3/this.fpsLimit}}i.fpsLimitAdd=1,i.fpsLimitMult=1.1,e.default=i},916:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(995)),r=s(i(804)),a={link:n.default,frameLength:1/15,frameSize:43,vertical:!0,hasReverse:!0,position:new r.default(-6,0)};e.default=a},561:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n={link:s(i(995)).default,frameLength:.05,frameSize:34};e.default=n},581:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(995)),r=s(i(804)),a={link:n.default,frameLength:1/15,frameSize:43,vertical:!0,hasReverse:!0,position:new r.default(-12,0)};e.default=a},970:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(804)),r=s(i(202));class a{constructor(t){this.frames=[],this.drawPosition=new n.default(0,0),this.drawReversePosition=new n.default(0,0),this.lastFrameEnds=0,this.currentFrame=0,a.checkConfig(t),this.sprite=t,this.imgSource=new Image,this.imgSource.src=t.link,this.imgSource.addEventListener("load",this.imgOnload.bind(this)),t.position&&(this.drawPosition=t.position,this.drawReversePosition=new n.default(-t.position.X,t.position.Y))}get Ends(){return this.lastFrameEnds}static initFrames(t,e){let i=0,s=0,n=0;const a=[],o=e.vertical?t.naturalHeight:t.naturalWidth,l=(e.vertical?t.naturalWidth:t.naturalHeight)/(e.hasReverse?2:1);do{const t=e.frameSizeOverride&&e.frameSizeOverride[i]||e.frameSize;n+=e.frameLengthOverride&&e.frameLengthOverride[i]||e.frameLength;const o={position:e.vertical?new r.default(0,s,l,t):new r.default(s,0,t,l),ends:n};e.hasReverse&&(o.positionReverse=e.vertical?new r.default(l,s,l,t):new r.default(s,l,t,l)),a.push(o),i+=1,s+=t}while(s<o);return a}static isBelow0(t){return t<=0}static isAnyBelow0(t){return t&&Object.keys(t).find((t=>a.isBelow0(Number(t))))}static checkConfig(t){if(a.isBelow0(t.frameSize)||a.isAnyBelow0(t.frameSizeOverride))throw new Error(`${t.link} - frameWidth can't be below 1`);if(a.isBelow0(t.frameLength)||a.isAnyBelow0(t.frameLengthOverride))throw new Error(`${t.link} - frameLength can't be below 1`)}imgOnload(){this.frames=a.initFrames(this.imgSource,this.sprite),this.lastFrameEnds=this.frames.at(-1).ends}getFrame(t){if(!this.lastFrameEnds)return;const e=t%this.lastFrameEnds;for(;!(e>(this.currentFrame?this.frames[this.currentFrame-1].ends:0)&&e<this.frames[this.currentFrame].ends);)this.currentFrame+=1,this.currentFrame===this.frames.length&&(this.currentFrame=0);return this.frames[this.currentFrame]}static drawSprite(t,e,i,s){e.drawImage(t,s.X,s.Y,s.Width,s.Height,Math.round(i.X-s.Width/2),Math.round(i.Y-s.Height),s.Width,s.Height)}drawFrame(t,e,i,s){const n=this.getFrame(i);if(!n)return;const r=e.plus(s?this.drawReversePosition:this.drawPosition),o=s&&n.positionReverse?n.positionReverse:n.position;a.drawSprite(this.imgSource,t,r,o)}}a.Empty={},e.default=a},607:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),(new(s(i(495)).default)).start()},642:function(t,e){var i=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function a(t){try{l(s.next(t))}catch(t){r(t)}}function o(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Api=void 0;class s{constructor(t){this.baseUrl=t}static getQueryString(t){return t?`?${Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}`:""}static getRequestInit(t,e){return{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}}static getUrl(t,e,i){return`${t}${e}${s.getQueryString(i)}`}getThisUrl(t,e){return s.getUrl(this.baseUrl,t,e)}get(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t,e),{method:"GET"})}))}post(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t),s.getRequestInit("POST",e))}))}put(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t),s.getRequestInit("PUT",e))}))}delete(t){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t),{method:"DELETE"})}))}patch(t,e){return i(this,void 0,void 0,(function*(){return fetch(this.getThisUrl(t,e),{method:"PATCH"})}))}}e.Api=s},457:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(591)),r=s(i(535)),a=i(55),o=s(i(429)),l=s(i(555)),u=i(989),h=s(i(804));var c;!function(t){t[t.canvas=0]="canvas",t[t.placaholder=1]="placaholder"}(c||(c={}));class d extends a.View{constructor(t,e){super(t,n.default,r.default),this.views={},this.services=e}createView(t){switch(t){case c.canvas:{const t=new h.default(640,480),e=new o.default(d.contentId,t),i={c:e.Context,size:t},{controlsSettings:s,gameSettings:n}=this.services;return this.game=new u.Game(s,n,i),e}case c.placaholder:return new l.default(d.contentId,this.services);default:throw new Error(`${t} doesn't exit`)}}getView(t){return this.views[t]||(this.views[t]=this.createView(t)),this.views[t]}initListeners(){var t,e;null===(t=this.getElementById("toCanvas"))||void 0===t||t.addEventListener("click",this.changeTo.bind(this,c.canvas)),null===(e=this.getElementById("toPlaceholder"))||void 0===e||e.addEventListener("click",this.changeTo.bind(this,c.placaholder))}append(){super.append(),this.initListeners(),this.changeTo(c.canvas)}changeTo(t){return this.currentViewId!==t&&(this.currentViewId=t,this.getView(t).replace(),!0)}}d.contentId=r.default.content,e.default=d},429:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(340)),r=s(i(90)),a=i(55);class o extends a.View{constructor(t,e){super(t,n.default,r.default),this.bg=this.getElementById("bg"),this.c=this.initCanvas(e),this.c.imageSmoothingEnabled=!1}get Context(){return this.c}initCanvas(t){const e=this.getElementById("canvas");return e.addEventListener("mousemove",this.showCoords.bind(this)),e.width=t.X,e.height=t.Y,e.getContext("2d")}showCoords(t){const e=t.target.getBoundingClientRect();this.bg.innerHTML=`x: ${(t.x-e.x).toString().padStart(4,"0")}, y:${(t.y-e.y).toString().padStart(4,"0")}`}}e.default=o},55:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;class i{constructor(t,e,s){this.parentId=t,this.templateItems=i.initTemplate(i.initTemplateString(e,s))}static initTemplateString(t,e){return Object.keys(e).reduce(((t,i)=>t.replace(new RegExp(`{{${i}}}`,"g"),e[i])),t)}setParent(t){this.parentId=t}static getParent(t){return document.getElementById(t)||document.getElementsByClassName(t)[0]||document.getElementsByTagName(t)[0]}getParent(){return i.getParent(this.parentId)}static initTemplate(t){const e=document.createElement("template");return e.innerHTML=t,[...e.content.children]}static getElementById(t,e){let s=t.find((t=>t.id===e));if(s)return s;for(let n=0;n<t.length;n+=1)if(t[n].children.length&&(s=i.getElementById([...t[n].children],e),s))return s}getElementById(t){return i.getElementById(this.templateItems,t)}replace(){const t=this.getParent();t&&(t.innerHTML="",this.append(t))}append(t=this.getParent()){t&&this.templateItems.forEach((e=>{t.append(e)}))}}e.View=i},555:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(903)),r=s(i(600)),a=i(55);class o extends a.View{constructor(t,e){super(t,n.default,r.default),this.services=e}}e.default=o}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i(607)})();